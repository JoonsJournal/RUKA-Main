<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUKA Neural Network Pipeline Visualization</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #eee;
            padding: 20px;
            min-height: 100vh;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #00d9ff;
            text-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
        }
        h2 {
            color: #ff6b6b;
            margin: 30px 0 15px 0;
            border-bottom: 2px solid #ff6b6b;
            padding-bottom: 5px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .pipeline {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 20px 0;
        }
        .stage {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .stage-title {
            font-size: 1.2em;
            color: #ffd93d;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .stage-number {
            background: #ff6b6b;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .data-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }
        .data-box {
            background: linear-gradient(135deg, #2d3436 0%, #1e272e 100%);
            padding: 15px;
            border-radius: 10px;
            min-width: 150px;
            text-align: center;
            border: 2px solid #00d9ff;
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.2);
        }
        .data-box.input {
            border-color: #6c5ce7;
            box-shadow: 0 0 15px rgba(108, 92, 231, 0.3);
        }
        .data-box.output {
            border-color: #00b894;
            box-shadow: 0 0 15px rgba(0, 184, 148, 0.3);
        }
        .data-box.process {
            border-color: #fdcb6e;
            box-shadow: 0 0 15px rgba(253, 203, 110, 0.3);
        }
        .arrow {
            font-size: 2em;
            color: #00d9ff;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .example-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .example-table th, .example-table td {
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }
        .example-table th {
            background: rgba(0, 217, 255, 0.2);
            color: #00d9ff;
        }
        .example-table tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.03);
        }
        .finger-models {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        .finger-model {
            background: linear-gradient(135deg, #2d3436 0%, #1e272e 100%);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e17055;
        }
        .finger-model h4 {
            color: #fab1a0;
            margin-bottom: 10px;
        }
        .motor-ids {
            font-size: 0.9em;
            color: #81ecec;
        }
        .network-diagram {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .layer {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 10px 0;
        }
        .neuron {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00d9ff;
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
        }
        .neuron.input { background: #6c5ce7; }
        .neuron.hidden { background: #fdcb6e; }
        .neuron.output { background: #00b894; }
        .layer-label {
            text-align: center;
            color: #b2bec3;
            font-size: 0.8em;
            margin-top: 5px;
        }
        .connections {
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #636e72;
        }
        .example-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }
        .example-box .comment {
            color: #6c757d;
        }
        .example-box .value {
            color: #00d9ff;
        }
        .example-box .label {
            color: #ffd93d;
        }
        .highlight {
            background: rgba(255, 107, 107, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
        }
        .info-card {
            background: linear-gradient(135deg, #2d3436 0%, #1e272e 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #00d9ff;
        }
        .info-card h4 {
            color: #00d9ff;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– RUKA Neural Network Pipeline</h1>
        <p style="text-align: center; color: #b2bec3; margin-bottom: 30px;">
            ì† ë™ì‘ â†’ ì‹ ê²½ë§ â†’ ë¡œë´‡ ëª¨í„° ì œì–´ì˜ ì „ì²´ ê³¼ì •
        </p>
        
        <h2>1ï¸âƒ£ ì „ì²´ ë°ì´í„° íë¦„</h2>
        <div class="pipeline">
            <div class="stage">
                <div class="stage-title">
                    <span class="stage-number">1</span>
                    ì›¹ìº /MANUS ì…ë ¥
                </div>
                <div class="data-flow">
                    <div class="data-box input">
                        <strong>MediaPipe</strong><br>
                        21ê°œ ëœë“œë§ˆí¬<br>
                        <small>(x, y, z)</small>
                    </div>
                    <span class="arrow">â†’</span>
                    <div class="data-box process">
                        <strong>ì¢Œí‘œ ë³€í™˜</strong><br>
                        Oculus í˜•ì‹<br>
                        <small>ì •ê·œí™”</small>
                    </div>
                    <span class="arrow">â†’</span>
                    <div class="data-box output">
                        <strong>ê´€ì ˆ ê°ë„</strong><br>
                        (5, 3)<br>
                        <small>5ì†ê°€ë½ Ã— 3ê´€ì ˆ</small>
                    </div>
                </div>
            </div>
            
            <div class="stage">
                <div class="stage-title">
                    <span class="stage-number">2</span>
                    ì†ê°€ë½ë³„ ë¶„ë¦¬ ì²˜ë¦¬
                </div>
                <div class="finger-models">
                    <div class="finger-model">
                        <h4>ğŸ‘ ì—„ì§€</h4>
                        ì…ë ¥: (3)<br>
                        ì¶œë ¥: (3)<br>
                        <div class="motor-ids">Motor 0,1,2</div>
                    </div>
                    <div class="finger-model">
                        <h4>â˜ï¸ ê²€ì§€</h4>
                        ì…ë ¥: (3)<br>
                        ì¶œë ¥: (2)<br>
                        <div class="motor-ids">Motor 3,4</div>
                    </div>
                    <div class="finger-model">
                        <h4>ğŸ–• ì¤‘ì§€</h4>
                        ì…ë ¥: (3)<br>
                        ì¶œë ¥: (2)<br>
                        <div class="motor-ids">Motor 5,6</div>
                    </div>
                    <div class="finger-model">
                        <h4>ğŸ’ ì•½ì§€</h4>
                        ì…ë ¥: (3)<br>
                        ì¶œë ¥: (2)<br>
                        <div class="motor-ids">Motor 8,7</div>
                    </div>
                    <div class="finger-model">
                        <h4>ğŸ¤™ ìƒˆë¼</h4>
                        ì…ë ¥: (3)<br>
                        ì¶œë ¥: (2)<br>
                        <div class="motor-ids">Motor 10,9</div>
                    </div>
                </div>
            </div>
            
            <div class="stage">
                <div class="stage-title">
                    <span class="stage-number">3</span>
                    ì‹ ê²½ë§ ì¶”ë¡  (ê° ì†ê°€ë½ë³„)
                </div>
                <div class="network-diagram">
                    <div class="layer">
                        <div class="neuron input"></div>
                        <div class="neuron input"></div>
                        <div class="neuron input"></div>
                    </div>
                    <div class="layer-label">ì…ë ¥ì¸µ: ê´€ì ˆ ê°ë„ (3)</div>
                    <div class="connections">â†“ LSTM Encoder â†“</div>
                    <div class="layer">
                        <div class="neuron hidden"></div>
                        <div class="neuron hidden"></div>
                        <div class="neuron hidden"></div>
                        <div class="neuron hidden"></div>
                        <div class="neuron hidden"></div>
                        <div class="neuron hidden"></div>
                        <div class="neuron hidden"></div>
                        <div class="neuron hidden"></div>
                    </div>
                    <div class="layer-label">ì ì¬ ë²¡í„° (32)</div>
                    <div class="connections">â†“ MLP Decoder â†“</div>
                    <div class="layer">
                        <div class="neuron output"></div>
                        <div class="neuron output"></div>
                    </div>
                    <div class="layer-label">ì¶œë ¥ì¸µ: ëª¨í„° ìœ„ì¹˜ (2)</div>
                </div>
            </div>
            
            <div class="stage">
                <div class="stage-title">
                    <span class="stage-number">4</span>
                    ëª¨í„° ëª…ë ¹ ì „ì†¡
                </div>
                <div class="data-flow">
                    <div class="data-box process">
                        <strong>ì—­ì •ê·œí™”</strong><br>
                        [0,1] â†’ ì‹¤ì œê°’<br>
                        <small>min_lim ~ max_lim</small>
                    </div>
                    <span class="arrow">â†’</span>
                    <div class="data-box output">
                        <strong>ëª¨í„° ìœ„ì¹˜</strong><br>
                        (11,)<br>
                        <small>1000~3000 ë²”ìœ„</small>
                    </div>
                    <span class="arrow">â†’</span>
                    <div class="data-box" style="border-color: #e17055;">
                        <strong>Dynamixel</strong><br>
                        sync_write<br>
                        <small>11ê°œ ëª¨í„°</small>
                    </div>
                </div>
            </div>
        </div>
        
        <h2>2ï¸âƒ£ êµ¬ì²´ì  ì˜ˆì‹œ: ê²€ì§€ ì†ê°€ë½</h2>
        
        <div class="info-card">
            <h4>ğŸ“ ì‹œë‚˜ë¦¬ì˜¤: ê²€ì§€ë¥¼ ë°˜ì¯¤ êµ¬ë¶€ë¦° ìƒíƒœ</h4>
            <p>ì†ì„ ë°˜ì¯¤ ì¥ì—ˆì„ ë•Œ ê²€ì§€ ì†ê°€ë½ì˜ ë°ì´í„° íë¦„ì„ ì¶”ì í•©ë‹ˆë‹¤.</p>
        </div>
        
        <div class="example-box">
            <span class="comment"># Step 1: ì›ì‹œ ê´€ì ˆ ê°ë„ (MediaPipe ê³„ì‚°)</span><br>
            <span class="label">index_joint_angles</span> = [<br>
            &nbsp;&nbsp;<span class="value">45.0</span>,  <span class="comment"># MCP (ì†ë“±-ì†ê°€ë½ ì—°ê²°ë¶€) - 45ë„ êµ½í˜</span><br>
            &nbsp;&nbsp;<span class="value">60.0</span>,  <span class="comment"># PIP (ì²« ë²ˆì§¸ ë§ˆë””) - 60ë„ êµ½í˜</span><br>
            &nbsp;&nbsp;<span class="value">40.0</span>,  <span class="comment"># DIP (ë‘ ë²ˆì§¸ ë§ˆë””) - 40ë„ êµ½í˜</span><br>
            ]
        </div>
        
        <div class="example-box">
            <span class="comment"># Step 2: ì •ê·œí™” (0~1 ë²”ìœ„)</span><br>
            <span class="comment"># í•™ìŠµ ì‹œ ì‚¬ìš©ëœ í†µê³„: min=-30Â°, max=100Â°</span><br><br>
            <span class="label">normalized</span> = [<br>
            &nbsp;&nbsp;(<span class="value">45</span> - (-30)) / (100 - (-30)) = <span class="highlight">0.577</span>,<br>
            &nbsp;&nbsp;(<span class="value">60</span> - (-30)) / (100 - (-30)) = <span class="highlight">0.692</span>,<br>
            &nbsp;&nbsp;(<span class="value">40</span> - (-30)) / (100 - (-30)) = <span class="highlight">0.538</span>,<br>
            ]
        </div>
        
        <div class="example-box">
            <span class="comment"># Step 3: ì‹ ê²½ë§ ì¶”ë¡ </span><br>
            <span class="label">input</span> = torch.tensor([0.577, 0.692, 0.538])<br><br>
            
            <span class="comment"># LSTM Encoder</span><br>
            <span class="label">embedded</span> = embed_layer(input)  <span class="comment"># (3,) â†’ (64,)</span><br>
            <span class="label">lstm_out</span> = lstm(embedded)  <span class="comment"># (64,) â†’ (128,)</span><br>
            <span class="label">latent</span> = decoder_linear(lstm_out)  <span class="comment"># (128,) â†’ (32,)</span><br><br>
            
            <span class="comment"># MLP Decoder</span><br>
            <span class="label">hidden1</span> = ReLU(Linear(latent))  <span class="comment"># (32,) â†’ (256,)</span><br>
            <span class="label">hidden2</span> = ReLU(Linear(hidden1))  <span class="comment"># (256,) â†’ (128,)</span><br>
            <span class="label">output</span> = Linear(hidden2)  <span class="comment"># (128,) â†’ (2,)</span><br><br>
            
            <span class="label">predicted</span> = [<span class="highlight">0.65</span>, <span class="highlight">0.35</span>]  <span class="comment"># ì •ê·œí™”ëœ ëª¨í„° ìœ„ì¹˜</span>
        </div>
        
        <div class="example-box">
            <span class="comment"># Step 4: ì—­ì •ê·œí™” (ì‹¤ì œ ëª¨í„° ê°’)</span><br>
            <span class="comment"># ê²€ì§€ ëª¨í„° ë²”ìœ„:</span><br>
            <span class="comment">#   Motor 3 (DIP): min=1100, max=2500</span><br>
            <span class="comment">#   Motor 4 (MCP): min=1050, max=2200</span><br><br>
            
            <span class="label">motor_3</span> = <span class="value">0.65</span> Ã— (2500 - 1100) + 1100 = <span class="highlight">2010</span><br>
            <span class="label">motor_4</span> = <span class="value">0.35</span> Ã— (2200 - 1050) + 1050 = <span class="highlight">1453</span>
        </div>
        
        <h2>3ï¸âƒ£ í•™ìŠµ ë°ì´í„° ìˆ˜ì§‘ ë°©ì‹</h2>
        
        <table class="example-table">
            <tr>
                <th>ì‹œê°„ (ms)</th>
                <th>ê²€ì§€ MCP (Â°)</th>
                <th>ê²€ì§€ PIP (Â°)</th>
                <th>ê²€ì§€ DIP (Â°)</th>
                <th>Motor 3</th>
                <th>Motor 4</th>
            </tr>
            <tr>
                <td>0</td>
                <td>5.0</td>
                <td>3.0</td>
                <td>2.0</td>
                <td>1150</td>
                <td>1100</td>
            </tr>
            <tr>
                <td>100</td>
                <td>25.0</td>
                <td>30.0</td>
                <td>20.0</td>
                <td>1580</td>
                <td>1280</td>
            </tr>
            <tr>
                <td>200</td>
                <td>45.0</td>
                <td>60.0</td>
                <td>40.0</td>
                <td>2010</td>
                <td>1453</td>
            </tr>
            <tr>
                <td>300</td>
                <td>65.0</td>
                <td>80.0</td>
                <td>55.0</td>
                <td>2280</td>
                <td>1620</td>
            </tr>
            <tr>
                <td>400</td>
                <td>85.0</td>
                <td>95.0</td>
                <td>75.0</td>
                <td>2450</td>
                <td>1850</td>
            </tr>
        </table>
        
        <div class="info-card">
            <h4>ğŸ’¡ í•™ìŠµì˜ í•µì‹¬</h4>
            <p>
                ì‹ ê²½ë§ì€ ìœ„ í‘œì™€ ê°™ì€ <strong>ê´€ì ˆ ê°ë„ â†’ ëª¨í„° ìœ„ì¹˜</strong> ë§¤í•‘ ë°ì´í„°ë¥¼ 
                ìˆ˜ì²œ~ìˆ˜ë§Œ ê°œ í•™ìŠµí•˜ì—¬, ìƒˆë¡œìš´ ê´€ì ˆ ê°ë„ê°€ ì…ë ¥ë˜ì—ˆì„ ë•Œ 
                ì ì ˆí•œ ëª¨í„° ìœ„ì¹˜ë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
            </p>
            <p style="margin-top: 10px;">
                <strong>MSE Loss</strong>: (ì˜ˆì¸¡ê°’ - ì‹¤ì œê°’)Â² ì˜ í‰ê· ì„ ìµœì†Œí™”í•˜ë„ë¡ í•™ìŠµ
            </p>
        </div>
        
        <h2>4ï¸âƒ£ Tendon-Driven íŠ¹ì„±</h2>
        
        <div class="info-card">
            <h4>âš™ï¸ ì™œ DIPì™€ MCP ëª¨í„°ê°€ ë°˜ëŒ€ë¡œ ì›€ì§ì´ë‚˜ìš”?</h4>
            <p>
                RUKAëŠ” <strong>í…ë˜(í˜ì¤„) êµ¬ë™ ë°©ì‹</strong>ì…ë‹ˆë‹¤. 
                DIPë¥¼ êµ½íˆë©´ í…ë˜ì´ ë‹¹ê²¨ì§€ê³ , ì´ í˜ì´ MCP ë°©í–¥ìœ¼ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.
            </p>
            <p style="margin-top: 10px;">
                ë”°ë¼ì„œ ì£¼ë¨¹ì„ ì¥˜ ë•Œ:<br>
                â€¢ <strong>DIP ëª¨í„°</strong>: curl_limits ë°©í–¥ìœ¼ë¡œ ì´ë™ (í…ë˜ ë‹¹ê¹€)<br>
                â€¢ <strong>MCP ëª¨í„°</strong>: tension_limits ê·¼ì²˜ ìœ ì§€ (í…ë˜ ì¥ë ¥ ìœ ì§€)
            </p>
        </div>
        
        <table class="example-table">
            <tr>
                <th>í¬ì¦ˆ</th>
                <th>DIP ëª¨í„° (4, 6, 9, 11)</th>
                <th>MCP ëª¨í„° (5, 7, 8, 10)</th>
            </tr>
            <tr>
                <td>ì† í´ê¸°</td>
                <td style="color: #00d9ff;">tension_limits ê·¼ì²˜</td>
                <td style="color: #00d9ff;">tension_limits ê·¼ì²˜</td>
            </tr>
            <tr>
                <td>ì£¼ë¨¹ ì¥ê¸°</td>
                <td style="color: #ff6b6b;">curl_limits ê·¼ì²˜</td>
                <td style="color: #00d9ff;">tension_limits ê·¼ì²˜</td>
            </tr>
        </table>
        
        <div style="margin-top: 40px; text-align: center; color: #636e72;">
            <p>Â© RUKA Robot Hand Project - Neural Network Pipeline Visualization</p>
        </div>
    </div>
</body>
</html>